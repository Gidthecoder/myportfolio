doctype html
html(lang='en')
  head
    title rme's data
    meta(charset='utf-8')
    meta(name="author" content="Gideon Akinsanmi")
    meta(name="description" content="enjoy variety of foods from different culture")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    link(rel="stylesheet" href="/fonts/font-awesome 5.14/font 5.14/css/all.css" type="text/css")
  body(id='body')
    p(class='closequestion' style='display:none;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgb(0,0,0,0.5);z-index:2;margin:0;').
    
    style
      include ../../user ui styling/general.css
    
           
    section(class='analyticsbody' data-name='web' )
              div
                table(style='border:1px solid black;border-collapse:collapse;width:100%;')
                      
                    tr(style='background-color: black;color:white;')
                      th(style='border: 1px solid white;')='year'
                      th(style='border: 1px solid white;')='month'
                      th(style='border: 1px solid white;')='date'
                      th(style='border: 1px solid white;')='day'
                      th(style='border: 1px solid white;')='Name'
                      th(style='border: 1px solid white;')='Repeat session'
                      th(style='border: 1px solid white;')='initial page'
                      th(style='border: 1px solid white;')='traffic source'
                      th(style='border: 1px solid white;')='location'
                      th(style='border: 1px solid white;')='pages'
                      th( style='border: 1px solid white;')='web hooks'
                    each item in session
                      tr
                        
                        th=item.year
                        th=item.month
                        th=item.date
                        th=item.day
                        th=item.name
                        th=item.repeatsession
                        th=item.initialpage
                        th=item.trafficsource
                        th=item.location
                        th
                          div(style='height:100px;overflow-y:scroll;')
                            table(style='width:100%;border-collapse:collapse;')
                              tr
                                th='page'
                                th='views'
                                th='time'
                              each source in item.page
                                tr
                                  th=source.url
                                  th=source.views
                                  th=source.time
                        th
                         div(style='height:140px;overflow-y:scroll;')
                          each source in item.webhook
                            if source.name == 'sales'
                              div(style='border: 1px solid silver;margin-bottom:10px;')
                                p(style='background-color:silver;margin:0;')=source.name
                                p=source.qty
                            else if source.name == 'addedtocart'
                              div(style='border: 1px solid silver;margin-bottom:10px;')
                                p(style='background-color:silver;margin:0;')=source.name
                                if source.qty.length > 0
                                  each stuff in source.qty
                                    p(style='display:flex;flex-direction:row;margin:0;')
                                      b=stuff.name + ':'
                                      b(style='flex:1;')=stuff.qty
                                else 
                                  p=''
                            else if source.name == 'removedfromcart'
                              div(style='border: 1px solid silver;margin-bottom:10px;')
                                p(style='background-color:silver;margin:0;')=source.name
                                if source.qty.length > 0
                                  each stuff in source.qty
                                    p(style='display:flex;flex-direction:row;margin:0;')
                                      b=stuff.name + ':'
                                      b(style='flex:1;')=stuff.qty
                                else 
                                  p=''
                            else if source.name == 'checkedout'
                              div(style='border: 1px solid silver;margin-bottom:10px;')
                                p(style='background-color:silver;margin:0;')=source.name
                                if source.qty.length > 0
                                  each stuff in source.qty
                                    p(style='display:flex;flex-direction:row;margin:0;')
                                      b=stuff.name + ':'
                                      b(style='flex:1;')=stuff.qty
                                else 
                                  p=''
    script(src='/javascripts/user/data/web.js' defer)